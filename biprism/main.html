<!DOCTYPE html>
<html>
<head>
    <script data-require="jquery@*" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <link rel="stylesheet" href="stl.css" />
    <script src="rt.js"></script>

<body>
    <div class="container">
      <h1 class="styleh" align="center">Bi prism</h1>
	  <table width="800" border="0" align="center">
		  <tr>
			<td>
				<canvas id="canvassp" width="800" height="300"  style="border:3px solid">
					<img src="rsrc/setup.png" alt="Picture" name="setup" width="800"  align="center" id="setup" class="setup"/>
					<img src="rsrc/prism.png" alt="Picture" width="800"  align="center" id="prism"  class="prism"/>
					<img src="rsrc/telescope.png" alt="Picture" width="800"  align="center" id="tele"  class="tele"/>
				</canvas>
			</td>
		  </tr>
		  <tr><td>
		  	<table width="800">
			  <tr>
			    <th align="center"><h1 class="style3">Controller</h1></th>
				<th align="center"><h1 class="style3">Fringe</h1></th>
			  </tr>
			  <tr>
				<td width="400" align="center">
					<span class="style4"> Telescope (in cm) </span>
					<br>
					<input id="sldtl" class="image-rotate1" type="range" name="rangeInput" min="45" max="100" value="100" step="0.1" oninput="numtl.value=sldtl.value" >
					<input id="numtl" class="image-rotate1" type="text" name="rangeInput" min="45" max="100" value="100" step="0.0001" oninput="sldtl.value=numtl.value" >
					<br><br>
					<span class="style4"> Telescope in X-direction(in mm)</span>
					<br>
					<input id="sldtlx" class="image-rotate1" type="range" name="rangeInput" min="-200" max="200" step="0.1" value="0" oninput="numtlx.value=sldtlx.value/79.99956" >
					<input id="numtlx" class="image-rotate1" type="text" name="rangeInput" min="-200" max="200" step="0.0001" value="0" oninput="sldtlx.value=numtlx.value*79.99956" >
					<br><br>
					<span class="style4"> Bi-prism (in cm)</span>
					<br>
					<input id="sldbp" class="image-rotate1" type="range" name="rangeInput" min="1" max="16" value="5" step="0.1" oninput="numbp.value=sldbp.value" >
					<input id="numbp" class="image-rotate1" type="text" name="rangeInput" min="1" max="16" value="5" step="0.0001" oninput="sldbp.value=numbp.value" >
					<br><br>
					<span class="style4"> Slit width</span>
					<br>
					<input id="sldst" class="image-rotate1" type="range" name="rangeInput" min="1" max="2.8" value="2" step="0.01">
					<!--<input id="numst" class="image-rotate1" type="text" name="rangeInput"value="0"  oninput="sldbs.value=numbs.value" >-->
				</td>
				<td width="400" hight="400">
					<canvas id="myCanvas" width="400" height="400"  style="border:3px solid">
					<img src="rsrc/spect.png" alt="Picture" name="spect" width="400" class="spect" id="spect"/>
					<img src="rsrc/spect_shade.png" alt="Picture" name="spectshade" width="400" class="spectshade" id="spectshade"/>
					<img src="rsrc/spect_scl.png" alt="Picture" name="spectscl" width="400" class="spectscl" id="spectscl"/>
					<!-- <img id="spectscl" src="rsrc/spectscl.png" alt="Picture" class="spectscl"/> -->
					</canvas>
				</td>
			  </tr>
			</table>
		  </td></tr>
</table>



	
	
	
  
    <script>
		// prism angle alpha is given by, d=2a(mu-1)alpha, a=slit~biprism
		var alpha = 0.5*Math.PI/180;
		var mu = 1.5;
		var lmda = 589e-9; //nm
		
		function alignment(tel,pri){
			contexsp.clearRect(0,0,800,300);
			contexsp.drawImage(imgsp, 0, 0, 1200, 400, 0, 0, 800, 300);
			contexsp.drawImage(imgprism, 845-8.5*pri, 0, 1200, 400, 0, 0, 800, 300);
			contexsp.drawImage(imgtele, 845-8.5*tel, 0, 1200, 400, 0, 0, 800, 300);			
		}
		
		function spali(wdt,wdtshd,stlx){
			contex.clearRect(0,0,400,400);
			iwidth = wdt*1700/0.0118789;
			dwidth = wdtshd*1700/0.0118789;
			contex.drawImage(spc, 0, 0, 1700, 400, 200-iwidth/2-stlx, 0, iwidth, 400);
			contex.drawImage(spcshade, 0, 0, 1700, 400, 200-dwidth/2-stlx, 0, dwidth, 400);
			contex.drawImage(spcscl, 0, 0, 400, 400, 0, 0, 400, 400);
		}
		
		var sldtl = document.getElementById("sldtl")
		var sldbp = document.getElementById("sldbp")
		var sldspx = document.getElementById("sldtlx")
		var numtl = document.getElementById("numtl")
		var numbp = document.getElementById("numbp")
		var numspx = document.getElementById("numtlx")
		var sldsw = document.getElementById("sldst")
		
		var canvassp = document.getElementById("canvassp");
		var contexsp = canvassp.getContext("2d"); 
        var imgsp = document.getElementById("setup");
		var imgprism = document.getElementById("prism");
		var imgtele = document.getElementById("tele");
		
		var canvas = document.getElementById("myCanvas"); 
        var contex = canvas.getContext("2d"); 
        var spc = document.getElementById("spect");
		var spcshade = document.getElementById("spectshade");
		var spcscl = document.getElementById("spectscl");
		
		
        window.onload = function () {
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)
        }
		
		sldtl.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
		
		numtl.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
		
		sldtlx.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
		
		numtlx.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
		
		sldbp.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
		
		numbp.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
		
		sldsw.onchange = function () {			
			D = Number(sldtl.value);
			a = Number(sldbp.value);
			alignment(D,a)
			bta = lmda*D/(2*a*(mu-1)*alpha);
			width = bta*100;
			tlx = Number(sldtlx.value);
			dw = Number(sldsw.value);
			spali(width,width/dw,tlx)	
		}
    </script> 
	
	
	
</body>


</html>