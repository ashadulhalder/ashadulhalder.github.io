<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="author" content="Ashadul Halder">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="google" content="notranslate" />
	<title>Diffraction Grating</title>

    	<script data-require="jquery@*" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    	<link rel="stylesheet" href="stl.css" />
    	<script src="rt.js"></script>
</head>
<style>
	.loader {z
	  border: 5px solid #f3f3f3;
	  border-radius: 50%;
	  border-top: 5px solid #3498db;
	  width: 80%;
	  height: 80%;
	  -webkit-animation: spin 5s linear infinite; /* Safari */
	  animation: spin 5s linear infinite;
	}

	/* Safari */
	@-webkit-keyframes spin {
	  0% { -webkit-transform: rotate(0deg); }
	  100% { -webkit-transform: rotate(360deg); }
	}

	@keyframes spin {
	  0% { transform: rotate(0deg); }
	  100% { transform: rotate(360deg); }
	}
	.anim{
		width: 400px;height: 400px; overflow:visible;
	}
	.animbox{
		overflow: auto; background-color:#000000; color:#FF0000;font-size:largest;display: block;position: fixed;z-index: 15; left: 0;top: 0;width: 100%;height: 100%; color:#4488FF;font-size:30px;display:block
	}
	@media only screen and (max-width: 400px) {
		.anim{width: 300px;height: 300px; overflow: visible;float:left;padding-left: 50px;}
		.animbox{overflow: auto; background-color:#000000; color:#FF0000;font-size:largest;display: block;position: fixed;z-index: 15; left: 0;top: 0;width: 100%;height: 100%; color:#4488FF;font-size:30px;display:block; align:left}
	}
</style>
<body>
    <div class="animbox" align="center" id="msg"><div class="anim"><br><br><br><br><br><div class="loader"><div class="loader"><div class="loader"><div class="loader"><div class="loader"><div class="loader"><div class="loader"><div class="loader"></div></div></div></div></div></div></div></div><b>Loading...<b></div></div>
    <div class="container">
      <h1 class="styleh" align="center">Diffraction Grating</h1>
	  <table width="800" border="0" align="center">
	  <tr><td>
	  <table width="800" border="0" align="center">
		 <tr>
			<td>
				<div class="image-frame">
					<img id="image0" src="rsrc/table.png" alt="Picture" class="table"/>
					<img id="image1" src="rsrc/base.png" alt="Picture" class="base"/>
					<img id="image2" src="rsrc/prism.png" alt="Picture" class="prism"/>
					<img id="spectscl" src="rsrc/spectscl.png" alt="Picture" class="spectscl"/>
			  </div>
     		</td>
			<td>
				<div>
				<br>
					<p align="center" class="style2">Telescope</p>
					<input id="sldbs" class="image-rotate1" type="range" name="rangeInput" min="-150" max="150" value="-0.02" step="0.01" oninput="numbs.value=sldbs.value" >
					<input id="numbs" class="image-rotate1" type="text" name="rangeInput"value="0" step="0.001" oninput="sldbs.value=numbs.value" >
					<br><br><br>
					
					<div align="center">
					<span class="style2">Mercury</span> 
					<label class="switch">
					  <input type="checkbox" id="myCheck" checked>
					  <span class="slider round"></span>
					</label>
					<span align="center" class="style2">Sodium</span> 
					</div>
					<div>&nbsp;</div>
					<div align="center">
						<button class="button" id="info">Info</button>
					</div>
					<!--<p align="center" class="style2">Prismtable</p>
					<br>
					<input id="sldpr" class="image-rotate2" type="range" name="rangeInput" min="-180" max="180" value="0" step="0.01" oninput="numpr.value=sldpr.value" >
					<input id="numpr" class="image-rotate2" type="text" name="rangeInput"value="0" step="0.001" oninput="sldpr.value=numpr.value" >-->
				</div>
			</td>
		 </tr>
	</table></td></tr>
	<tr><td>
	<div class="spc-frame">
		<canvas id="spectCanvas" width="800" height="400" style="border:1px solid #c3c3c3;background-color: #000000">
			Your browser does not support the canvas element.
		</canvas>
	</div></td></tr>
	</table
	</div>
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
	<div align="center"><span class="inh"><u><i>Procedure</i></u></span></div>
	<div align="center"> <img src="rsrc/instr.png" width="600" height="200" /></div>
	<ul>
	  <li>Hover your cursor over the slider handle (<span class="inshl">1</span>) and use the up and down arrow keys on the keyboard for fine tuning. The text box <span class="inshl">2</span> also can be used for fine adjustment.</li>
	  <li>Move the eyepiece in such a way that, the central fringe coincides the central arrow sign. Record the corresponding reading from the text box <span class="inshl">2</span>.</li>
	  <li>Now mode the eyepiece toward right side and record the readings for first order spectrum in Table 1</li>
	  <li>Repeat the same on the left side and record in Table 1</li>
	  <li>Estimate the wavelengths of the spectrum using the expression</li>
	  <div align="center"> <img src="rsrc/frmla.png" width="200" /></div>
	  where, <it>N</it> is the no. of lines per unit length of the grating and <it>n</it> is the order no. of the spectra.
	  <li>Repeat the same for the second-order spectrum and calculate the wavelengths.</li>
	  <li>The mercury vapour lamp can be replaced with the sodium vapour lamp using the switch (<span class="inshl">3</span>) </li>

	  <li>Wavelengths of the Mercury spectral lines are 420.6 nm, 447.2 nm, 492.2 nm, 501.6 nm, 587.6 nm, 667.8 nm. For Sodium lamp, wavelengths are 588.995 nm and 589.592 nm. N=5.9x10<sup>5</sup> lines/m.</li>
	</ul>
	<div align="center"> <img src="rsrc/tbl.png" width="600" /></div>
	<br>
	  <p>&nbsp;</p>
	  <p>&nbsp;</p>
	  <p>&nbsp;</p>
	  <p>&nbsp;</p>
  </div>

</div>
<input id="txt" class="image-rotate2" type="text">
<script>
	var modal = document.getElementById("myModal");
	var span = document.getElementsByClassName("close")[0];
	span.onclick = function() {
	  modal.style.display = "none";
	}
	window.onclick = function(event) {
	  if (event.target == modal) {
		modal.style.display = "none";
	  }
	}

	var checkBox = document.getElementById("myCheck");
	var sldr1 = document.getElementById("sldbs")
	var numr1 = document.getElementById("numbs")
	var canvas = document.getElementById("spectCanvas");
	var ctx = canvas.getContext("2d");
	var wd = 2;

	
	var adj = 5932;
	// 15000 lines/inch ==> N=5.9e5 lines/m
	N = 5.9e5;
	
	function draw(){
		if (checkBox.checked == false){
			lambdal = [420.6, 447.2, 492.2, 501.6, 587.6, 667.8];
			ctx.clearRect(0,0,800,200);
			ctx.shadowColor = "#000000";
			ctx.beginPath();
			ctx.moveTo(400, 10);
			ctx.lineTo(410, 2);
			ctx.lineTo(390, 2);
			ctx.closePath();

			ctx.fillStyle = "#00FF00";
			ctx.fill();

			////////////////////////////////////////////////////////////
			for (i = 0; i < lambdal.length; i++) {
				for (j = -3; j <=3; j++) {
					tr = Math.asin(j*lambdal[i]*1e-9*N)*180/Math.PI;
					if (Number(sldr1.value)<=tr+15 && Number(sldr1.value)>=tr-15 && j!=0){
						var px = 100*(tr-sldr1.value);
						ctx.shadowBlur = 10;
						if (i==0){ctx.fillStyle = "#4d00bf";ctx.shadowColor = "#4d00bf";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
						else if (i==1){ctx.fillStyle = "#0035ff";ctx.shadowColor = "#0035ff";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
						else if (i==2){ctx.fillStyle = "#00ffea";ctx.shadowColor = "#00ffea";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
						else if (i==3){ctx.fillStyle = "00ff7b";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
						else if (i==4){ctx.fillStyle = "#ffe600";ctx.shadowColor = "#ffe600";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
						else if (i==5){ctx.fillStyle = "#FF0000";ctx.shadowColor = "#FF0000";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
					}
					else if (Number(sldr1.value)<=tr+4.04 && Number(sldr1.value)>=tr-4.04 && j==0){
						var px = 100*(0-sldr1.value);
						ctx.shadowBlur = 10;
						ctx.fillStyle = "#ddddff";
						ctx.shadowColor = "#ddddff";
						ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);
						ctx.globalAlpha = 1-tr/180;
					}
				}
			}
		}
		else{
			lambdal = [588.9950, 589.5924];
			ctx.clearRect(0,0,800,200);
			ctx.shadowColor = "#000000";
			ctx.beginPath();
			ctx.moveTo(400, 10);
			ctx.lineTo(410, 2);
			ctx.lineTo(390, 2);
			ctx.closePath();

			ctx.fillStyle = "#00FF00";
			ctx.fill();

			////////////////////////////////////////////////////////////
			for (i = 0; i < lambdal.length; i++) {
				for (j = -3; j <=3; j++) {
					tr = Math.asin(j*lambdal[i]*1e-9*N)*180/Math.PI;
					if (Number(sldr1.value)<=tr+15 && Number(sldr1.value)>=tr-15 && j!=0){
						var px = 100*(tr-sldr1.value);
						ctx.shadowBlur = 10;
						if (i==0){ctx.fillStyle = "#FFEE00";ctx.shadowColor = "#FFEE00";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
						else if (i==1){ctx.fillStyle = "#FFE000";ctx.shadowColor = "#FFE000";ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);ctx.globalAlpha = 1-tr/90;}
					}
					else if (Number(sldr1.value)<=tr+15 && Number(sldr1.value)>=tr-15 && j==0){
						var px = 100*(tr-sldr1.value);
						ctx.shadowBlur = 10;
						ctx.fillStyle = "#FFEE00";
						ctx.shadowColor = "#FFEE00";
						ctx.fillRect(800-(px-(wd/2)+400),10,wd,180);
						ctx.globalAlpha = 1-tr/180;
					}
				}
			}
		}
	}
	
	//spectra(0,0)
	window.onload = function () {
		//modal.style.display = "block";
		draw()
		document.getElementById("msg").style.display="none";
	}

	sldr1.onchange = function () {
		draw()
	}

	
	numr1.onchange = function () {
		draw()
	}
	
	checkBox.onchange = function () {
		draw()
	}
	
	info.onclick = function () {
		modal.style.display = "block";
	}
</script> 
	
	
	
  </body>


</html>
