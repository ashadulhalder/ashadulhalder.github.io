<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PG Projects</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/icon" href="../images/favicon.png"/> 

    <!---------- CSS ------------>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="../styles/style_hm.css">
    <link rel="stylesheet" href="../styles/style_ind.css">
    <script type="text/javascript" src="https://sdk.userbase.com/2/userbase.js"></script>
    <!---------- JS ------------>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>

    <script>
        $.getJSON('jsons/2021_ug_127.json', function(data) {
            var nn = Object.keys(data.student).length;
            names = "";
            phto = "";
            if(data.supervisor=="ic"){supvr = "Dr. Indranath Chaudhuri"; sup_ph = "ic.jpg";}
            else if(data.supervisor=="so"){supvr = "Dr. Soma Ghosh"; sup_ph = "so.jpg";}
            else if(data.supervisor=="sp"){supvr = "Dr. Saunak Palit"; sup_ph = "sp.jpg";}
            else if(data.supervisor=="td"){supvr = "Dr. Tapati Dutta"; sup_ph = "td.jpg";}
            else if(data.supervisor=="sg"){supvr = "Dr. Sarbari Guha"; sup_ph = "sg.jpg";}
            else if(data.supervisor=="sgh"){supvr = "Dr. Subhankar Ghosh"; sup_ph = "sgh.jpg";}
            else if(data.supervisor=="sba"){supvr = "Dr. Shibaji Banerjee"; sup_ph = "sba.jpg";}
            else if(data.supervisor=="src"){supvr = "Dr. Suparna Roy Chowdhury"; sup_ph = "src.jpg";}
            else if(data.supervisor=="tb"){supvr = "Dr. Tanaya Bhattacharyya"; sup_ph = "tb.jpg";}
            else if(data.supervisor=="sr"){supvr = "Dr. Sudipto Roy"; sup_ph = "sr.jpg";}
            else if(data.supervisor=="snr"){supvr = "Prof. Sailendra Narayan Roy Choudhury"; sup_ph = "snr.jpg";}
            else if(data.supervisor=="gb"){supvr = "Prof. Gayatri Banerjee"; sup_ph = "gb.jpg";}
            else if(data.supervisor=="ag"){supvr = "Dr. Aditi Ghosh"; sup_ph = "ag.jpg";}
            else if(data.supervisor=="sd"){supvr = "Dr. Sanghamitra Das"; sup_ph = "sd.jpg";}
            else if(data.supervisor=="gpd"){supvr = "Prof. Gour P. Das"; sup_ph = "gpd.jpg";}
            if(nn>1){
                for (let i = 0; i < nn-2; i++) {
                    names += "<auth>" + data.student[i].name + "</auth>, ";
                } 
                names += "<auth>" + data.student[nn-2].name + "</auth> and <auth>" + data.student[nn-1].name + "</auth> <br> under the guidance of <auth>" + supvr + "</auth><h2 style='padding-top:10px'>Abstract</h2>";
            }
            else{
                names += "<auth>" + data.student[nn-1].name + "</auth> under the guidance of <auth>" + supvr + "</auth><h2 style='padding-top:10px'>Abstract</h2>";
            }

            for (let i = 0; i < nn; i++) {
                phto += "<div style='padding:10px'><img src='images/stdnt/" + data.student[i].ph + "' class='dp'></div>";
            } 
            
            //for (let i = 0; i < nn; i++){
            //    pdfbtn += "Download: <a target='_blank' href='pdfs/" +  + "'><button class='btn'>Pdf copy " + (i+1) + "</button></a>";
            //}
            if (data.cat=="UG Project"){
                var catprj = "<h2 style='float:left' class='tb'><span><i class='fa fa-reply-all' aria-hidden='true'></i> <a class='p2' href='../ug_projects.html'>&nbsp;UG Projects </a></span> &nbsp;</h2>";
            }
            else if (data.cat=="PG Project"){
                var catprj = "<h2 style='float:left' class='tb'><span><i class='fa fa-reply-all' aria-hidden='true'></i> <a class='p2' href='../pg_projects.html'>&nbsp;PG Projects </a></span> &nbsp;</h2>";
            }
            document.getElementById("sup_img").innerHTML = "<div style='padding:10px'><img src='images/" + sup_ph + "' class='dp'></div>";
            document.getElementById("std_img").innerHTML = phto;
            //document.getElementById("hed_cat").innerHTML = catprj;
            document.getElementById("ttl").innerHTML = data.title;
            document.getElementById("yr").innerHTML = "(" + data.year + ")";
            document.getElementById("abs").innerHTML = data.abstrt;
            document.getElementById("fln").innerHTML = " <a target='_blank' href='pdfs/" + data.fl_nm + "'><button class='btn'>Download Pdf </button></a>";
            document.getElementById("names").innerHTML = names;
        })
    </script>
	<script>
		$(function(){$("#hdr").load("../hdr_ftr/nav_dbs.html");});
		$(function(){$("#ftr").load("../hdr_ftr/ftr_dbs.html");});
	</script>
</head>

<!--==============================================================-->
<body>
    <!-- Loading View -->
    <div id="loading-view">Loading...</div>

    <!-- Auth View -->
    <div id="auth-view" class="container">
        <div class="row">
            <div class="col-md-4 offset-md-4">
                <div class="login-form bg-light mt-4 p-4">
                    <form id="login-form" class="row g-3">
                        <h4>Log in</h4>
                        <p>The entire website is under construction.. <br>It is not published yet....</p>
                        <div class="col-12">
                            <label>Username</label>
                            <input id="login-username" type="text" required placeholder="Username">
                        </div>
                        <div class="col-12">
                            <label>Password</label>
                            <input id="login-password" type="password" required placeholder="Password">
                        </div>
                        <div class="col-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="rememberMe">
                                <label class="form-check-label" for="rememberMe"> Remember me</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <input type="submit" value="Sign in">
                        </div>
                    </form>
                    <div id="login-error"></div>
                </div>
            </div>
        </div>
    </div>

  <div id="todo-view"> 
    <div class='explg'>
        <div id="username"></div>
		<input type="button" value="Logout" id="logout-button" class="lbutton">
		<div id="logout-error"></div>
    </div>
    <!--------------------------------------->
  <header class="header" id="hdr"></header>
    
    <section>
    <div>
    <div style="padding-top:80px;padding-bottom: 10px;">
         <table style="margin: auto; padding-bottom: 40px;">
            <tr><td>
                <div class="ttl" id="ttl"></div>
            </td></tr>
            <tr><td>
            <table style="width:100%;padding-bottom: 10px;">
                <tr><td class="tc1" id="sup_img"></td>
                <td style="width:20px">&nbsp;</td>
                <td class="tc2">
                    <div class="yr" id="yr"></div>
                    <div style="text-align:center;padding-bottom: 15px;" id="names"></div>
                    <div class="abs" id="abs"></div>
                    <div style="text-align: center;" id="fln"></div>
                </td>
                <td style="width:20px">&nbsp;</td>
                <td class="tc1" id="std_img"></td>
                </tr>
            </table>
            </td></tr>
         </table>
    </div> 
    </div>
    </section>

<!--============================ Footer ========================================-->
  <section class="ftr" id="ftr"></section>
</div>


<!-- application code -->
<script type="text/javascript">
  userbase.init({ appId: '73eaa452-5e6f-40b4-85cb-428bdac3e38d' })
    .then((session) => session.user ? showTodos(session.user) : showAuth())
    .catch(() => showAuth())
    .finally(() => document.getElementById('loading-view').style.display = 'none')

  function handleLogin(e) {
    e.preventDefault()

    const username = document.getElementById('login-username').value
    const password = document.getElementById('login-password').value

    userbase.signIn({ username, password, rememberMe: 'local' })
      .then((user) => showTodos(user))
      .catch((e) => document.getElementById('login-error').innerHTML = e)
  }

  function handleLogout() {
    userbase.signOut()
      .then(() => showAuth())
      .catch((e) => document.getElementById('logout-error').innerText = e)
  }

  function showTodos(user) {
    document.getElementById('auth-view').style.display = 'none'
    document.getElementById('todo-view').style.display = 'block'
  }

  function showAuth() {
    document.getElementById('todo-view').style.display = 'none'
    document.getElementById('auth-view').style.display = 'block'
    document.getElementById('login-username').value = ''
  }

  document.getElementById('login-form').addEventListener('submit', handleLogin)
  document.getElementById('logout-button').addEventListener('click', handleLogout)
  document.getElementById('auth-view').style.display = 'none'
  var divsToHide = document.getElementById('todo-view');
  for(var i = 0; i < divsToHide.length; i++){
      console.log(i);
      divsToHide[i].style.display = "none !important";
  }
</script>
</body>
</html>

