<!DOCTYPE html>
<html>
<head>
    <script data-require="jquery@*" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <link rel="stylesheet" href="stl.css" />

<body>
    <div class="container">
      
	  <table width="800" border="0" align="center">
		  <tr><td><h1 class="styleh" align="center">Newton's Ring</h1></td></tr>
		  <tr>
			<td align="center">
				<canvas id="Canvas" width="500" height="500"  style="border:3px solid">
					Your browser does not support the HTML5 canvas tag.e" width="800"  align="center" id="tele"  class="tele"/>
					<img src="rsrc/ovly.png" alt="Picture" name="ovly" width="500" class="ovly" id="ovly"/>
					<img src="rsrc/crswr.png" alt="Picture" name="crswe" width="500" class="crswr" id="crswr"/>
				</canvas>
			</td>
		  </tr>
		  <tr>
			<td align="center">
				<span class="style1"> x (in cm) </span>
					<br>
					<input id="sldtl" class="slider" type="range" name="rangeInput" min="-73.6" max="126.4" value="12.5" step="0.1" oninput="numtl.value=(sldtl.value/148.0225895).toFixed(5)" >
					<br>
					<input id="numtl" class="tbox" type="text" name="rangeInput" min="-73.6" max="126.4" value="12.5" step="0.001" oninput="sldtl.value=numtl.value*148.0225895" >
			</td>
		  </tr>
		  <tr>
			<td align="center">
				<span class="style1"> Distance between mirror and lens </span>
					<br>
					<input id="sldd" class="slider" type="range" name="rangeInput" min="0" max="50" value="0" step="0.1">
					<button id="zero" class="button">Set to zero</button>
			</td>
		  </tr>
</table>

<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
	<div align="center"><span class="inh"><u><i>Instructions</i></u></span></div>
	<ul>
	  <li>1st slider to move the microscope along X axis. (<span class="inshl">1</span>) </li>
	  <li>Text box to read the value of slider 1. It can be used for fine adjustment.(<span class="inshl">2</span>) </li>
	  <li> 2nd slider to adjust the separation between the mirror and the lens. (<span class="inshl">3</span>) </li>
	  <li>Click the button &quot;set to zero&quot; to set the second slider to zero. (<span class="inshl">4</span>) </li>
	  <li>To observe the continious variation, just click on the slider button and the use up/down key of the keyboard.</li>
	</ul>
	<div align="center"> <img src="rsrc/instr.png" width="600" height="200" /></div>
  </div>

</div>

<script>
	var modal = document.getElementById("myModal");
	var span = document.getElementsByClassName("close")[0];
	span.onclick = function() {
	  modal.style.display = "none";
	}
	window.onclick = function(event) {
	  if (event.target == modal) {
		modal.style.display = "none";
	  }
	}
	var R = 0.7; // in m
	var lmda = 589e-9; //nm
	
	var sldtl = document.getElementById("sldtl")
	var numtl = document.getElementById("numtl")
	
	var canvas = document.getElementById("Canvas"); 
	var ctx = canvas.getContext("2d");
    var shade = document.getElementById("ovly");
	var crswr = document.getElementById("crswr");
	ctx.beginPath();
	ctx.arc(100, 75, 50, 0, 2 * Math.PI);
	ctx.stroke();
	
	function inten(ii,rr,tt){
		//opt = Math.floor(200*Math.cos(tt+(Math.pow(rr-ii,2))/500))/255;
		opt = 0.6+0.4*Math.sin(tt+(Math.pow((rr-ii),2))/500);
		return opt
	}
	
	function ring(t,xtrnsl){
		r = 240*1.1;
		ctx.clearRect(0,0,500,500);
		ctx.fillStyle = "#000000";
		ctx.fillRect(0,0,500,500);
		for (i=0;i<=r;i=i+0.5){
			ctx.fillStyle = "#"+(Math.floor(inten(i,r,t)*255)).toString(16).padStart(2,'0')+(Math.floor(inten(i,r,t)*170)).toString(16).padStart(2,'0')+(Math.floor(0)).toString(16).padStart(2,'0');
			ctx.beginPath();
			ctx.arc(250+xtrnsl, 250, (r-i)/1.1, 0, 2 * Math.PI);
			ctx.fill();
		}
		ctx.drawImage(shade, 0-xtrnsl, 0, 500, 500, 0, 0, 500, 500);
		ctx.drawImage(crswr, 0, 0, 500, 500, 0, 0, 500, 500);
	}
	

		
	window.onload = function () {
		modal.style.display = "block";
		D = Number(sldd.value);
		x = -1*(Number(sldtl.value)-26.4)*5;
		ring(D/2,x);
	}
	
	sldtl.onchange = function () {			
		D = Number(sldd.value);
		x = -1*(Number(sldtl.value)-26.4)*5;
		ring(D/2,x);	
	}
	
	numtl.onchange = function () {			
		D = Number(sldd.value);
		x = -1*(Number(sldtl.value)-26.4)*5;
		ring(D/2,x);	
	}
	
	sldd.onchange = function () {			
		D = Number(sldd.value);
		x = -1*(Number(sldtl.value)-26.4)*5;
		ring(D/2,x);	
	}
	
	zero.onclick = function () {	
		sldd.value=0
		D = Number(sldd.value);
		x = -1*(Number(sldtl.value)-26.4)*5;
		ring(D/2,x);	
	}

</script> 
	
	
	
</body>


</html>
